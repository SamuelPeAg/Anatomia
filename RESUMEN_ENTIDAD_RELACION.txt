================================================================================
           RESUMEN DEL MODELO ENTIDAD-RELACIÓN - ANATOMÍA MEDAC
================================================================================

Este documento detalla la estructura actual de la base de datos y las relaciones
entre las entidades del sistema de gestión de informes patológicos.

--------------------------------------------------------------------------------
1. ENTIDAD: User (Usuarios)
--------------------------------------------------------------------------------
- Descripción: Usuarios con acceso al sistema (Administradores/Técnicos).
- Campos principales:
    * id (PK)
    * name (Nombre del usuario)
    * email (Correo electrónico - Único)
    * password (Contraseña cifrada)
- Relaciones:
    * Actualmente independiente (sin relaciones directas en el modelo).

--------------------------------------------------------------------------------
2. ENTIDAD: Expediente (Pacientes/Casos)
--------------------------------------------------------------------------------
- Descripción: Representa al paciente o el caso clínico original.
- Campos principales:
    * id (PK)
    * nombre (Nombre completo del paciente)
    * correo (Correo de contacto)
    * observaciones (Notas generales del paciente)
- Relaciones:
    * HAS MANY Informes (1:N): Un expediente puede contener múltiples informes
      patológicos (ej. una biopsia y una citología para el mismo paciente).

--------------------------------------------------------------------------------
3. ENTIDAD: TipoMuestra (Catálogo)
--------------------------------------------------------------------------------
- Descripción: Define el tipo de muestra (Biopsia, Esputo, Orina, etc.) y su prefijo.
- Campos principales:
    * id (PK)
    * nombre (Nombre del tipo, ej: "Biopsia")
    * prefijo (Letra identificativa, ej: "B", "O", "CV")
    * contador_actual (Correlativo para generar el próximo código)
    * requiere_organo (Booleano: indica si debe pedirse el órgano en la fase 1)
- Relaciones:
    * HAS MANY Informes (1:N): Un tipo de muestra se asocia a muchos informes.

--------------------------------------------------------------------------------
4. ENTIDAD: Informe (Cerebro del Sistema)
--------------------------------------------------------------------------------
- Descripción: Registro central que contiene el progreso de las 4 fases.
- Campos principales:
    * id (PK)
    * expediente_id (FK -> expedientes)
    * tipo_id (FK -> tipo_muestras)
    * codigo_identificador (Ej: B2501, CV2512)
    * estado (incompleto | completo)
    * [Fase 1]: recepcion_observaciones, recepcion_organo, etc.
    * [Fase 2]: procesamiento_tipo, procesamiento_observaciones, etc.
    * [Fase 3]: tincion_tipo, tincion_observaciones, etc.
    * [Fase 4]: citodiagnostico (resultado final).
- Relaciones:
    * BELONGS TO Expediente (N:1)
    * BELONGS TO TipoMuestra (N:1)
    * HAS MANY Imagenes (1:N): El informe puede tener fotos en cualquier fase.

--------------------------------------------------------------------------------
5. ENTIDAD: Imagenes (Multimedia)
--------------------------------------------------------------------------------
- Descripción: Almacena las rutas de los archivos subidos en cada fase.
- Campos principales:
    * id (PK)
    * informe_id (FK -> informes)
    * fase (recepcion | procesamiento | tincion | microscopio)
    * ruta (Ruta en el disco/storage)
    * descripcion (Texto descriptivo opcional)
    * zoom (x4, x10, x40, x100 - para microscopía)
    * obligatoria (Booleano)
- Relaciones:
    * BELONGS TO Informe (N:1)

--------------------------------------------------------------------------------
RESUMEN DE FLUJO:
--------------------------------------------------------------------------------
Expediente (1) --------- (N) Informe (1) --------- (N) Imagenes
                              |
                              |
                        TipoMuestra (1)
--------------------------------------------------------------------------------
